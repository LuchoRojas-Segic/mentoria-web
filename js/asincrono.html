<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplos Promesas</title>
</head>
<body>
    <button id="trigger-button">Trigger</button>
    <script>
        /*let buttonelement = document.getElementsByName('trigger-button');
        buttonElement.addEventListener('click',(even) =>{
            console.log("click!!!")
        })*/

        document
            .getElementById('trigger-button')
            .addEventListener('click',(even) =>{
                //1er caso de pruebas
                //console.log("click!!!")
                /*let promise = new Promise((resolve, reject) =>{
                    setTimeout(() => {
                        //resolve('Promesa ejecutada')
                        reject('La Promesa falló')
                    }, 5000);
                })

                console.log(promise)

                promise //Aquí se ejecuta la promesa con sus errores
                    .then(result => {
                            console.log(result)                            
                    })
                    .catch(err => {ejecutada
                        console.error(err)
                    })*/

                    //2do caso de pruebas
                    /* fetch('http://mentoria15.segic.cl/')
                    /*.then(res => {
                        console.log(res)
                    })
                    .then(res => res.json())
                    .then(data => {
                        console.log(data)
                    })
                    .catch(err => {
                        console.info("El terrible error:" + err)
                    })*/

                    //Otro caso de prueba
                    /*const loadData = () => {
                        console.log("I m a arrow function")
                    }

                    loadData();*/

                    /*const loadData = async () => {
                        //const response = await fetch('http://mentoria15.segic.cl/')
                        const response = await fetch('https://jsonplaceholder.typicode.com/todos/1')
                        const todo = await response.json()

                        console.log(todo)

                        todos.forEach(todo => {
                            console.log(todo.firstname)
                            
                        });
                    }

                    loadData();*/

                    //Otra forma de hacerlo
                    /*(async (label) => {
                        try {
                            const response = await fetch('https://jsonplaceholder.typicode.com/todos/1')
                            const todo = await response.json()
                            console.log(label + todo.title)
                        } catch(err) {
                            console.error(err)
                        }

                    })("El nombre de la tarea es: ")*/

                    //Para hacer llamdas en paralelo
                    const loadData = async () => {
                        try {
                            const results = await Promise.all([
                                fetch('https://jsonplaceholder.typicode.com/todos/1'),
                                fetch('https://jsonplaceholder.typicode.com/todos/2'),
                                fetch('https://jsonplaceholder.typicode.com/todos/3')
                            ])
                            const dataPromises = await results.map(result =>result.json())
                            const fetchData = Promise.all(dataPromises)
                            return fetchData

                            //conlose.log(results)
                        } catch (err) {
                            console.error(err)
                        }
                    }
                    loadData().then(json => {
                        json.forEach(todo => {
                            console.log(todo.title)                            
                        })
                    })
            })
    </script>
</body>
</html>